LoadModule rewrite_module modules/mod_rewrite.so
LoadModule deflate_module /usr/local/apache2/modules/mod_deflate.so
LoadModule proxy_module /usr/local/apache2/modules/mod_proxy.so
LoadModule proxy_fcgi_module /usr/local/apache2/modules/mod_proxy_fcgi.so

<IfModule mod_proxy.c>
    # Proxy Server Timeout
    ProxyTimeout 500
</IfModule>

# NameVirtualHost *:80

# ----------------------------------------------------------------------------------------------------------------------
#                              Single Apache Service & Multiple PHP Service
#                              configures virtual host for each php service
# ----------------------------------------------------------------------------------------------------------------------


#
# APACHE
# Configuration Options:

# Single appache service for multiple php services (each php service has its own host)

#   - Its is possible to configure single appache service for multiple php services/hosts,
#   - Suppose code directory contain multiple sub directories
#       * One sub directory per service
#       * one host entry per service
#   - File to add/configure virtual hosts is ./o-dock/_conf/apache/sites/apache.conf
#   - So need to configure ProxyPassMatch for each virtual host accordingly
#   - {PROJECT-IDENTIFIER}.{TLD}.{CONTAINER-IDENTIFIER} is service container name e.g. larabeans.ts.api, larabeans.ts.web, larabeans.ts.admin etc
#
#   Suppose there are multiple sub directories under {PROJECT-IDENTIFIER}/code e.g. api, admin, web and each belongs to different php
#   services i.e {PROJECT-IDENTIFIER}.{TLD}.api, {PROJECT-IDENTIFIER}.{TLD}.admin, {PROJECT-IDENTIFIER}.{TLD}.web & each have own domain to access that service like
#   api.{PROJECT-IDENTIFIER}.{TLD}, admin.{PROJECT-IDENTIFIER}.{TLD}, web.{PROJECT-IDENTIFIER}.{TLD}, we can configure/access these using single apache service as below
#   {CONTAINER-IDENTIFIER} is equal to admin, api, web for each service, the each service will have entry like
#
#   If root directory, and main domain
#
#   <VirtualHost *:80>
#        Options Indexes FollowSymLinks
#        # Proxy .php requests to port 9000 of the php-fpm container
#        ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://{PROJECT-IDENTIFIER}.{TLD}.{CONTAINER-IDENTIFIER}:9000/var/www/$1  # For Php
#        ProxyPassMatch ^/(.*\.js(/.*)?)$ http://{PROJECT-IDENTIFIER}.{TLD}.{CONTAINER-IDENTIFIER}:9000/var/www/$1   # For node
#        ServerName {PROJECT-IDENTIFIER}.{TLD}
#        DocumentRoot /var/www
#        <Directory /var/www/>
#            DirectoryIndex index.html
#            AllowOverride All
#            <IfVersion < 2.4>
#                  Allow from all
#            </IfVersion>
#            <IfVersion >= 2.4>
#              Require all granted
#            </IfVersion>
#        </Directory>
#        # Send apache logs to stdout and stderr
#        CustomLog /proc/self/fd/1 common
#        ErrorLog /proc/self/fd/2
#    </VirtualHost>
#
#   If sub directory, and sub domian
#
#   <VirtualHost *:80>
#        Options Indexes FollowSymLinks
#        # Proxy .php requests to port 9000 of the php-fpm container
#        ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://{PROJECT-IDENTIFIER}.{TLD}.{CONTAINER-IDENTIFIER}:9000/var/www/$1  # For Php
#        ProxyPassMatch ^/(.*\.js(/.*)?)$ http://{PROJECT-IDENTIFIER}.{TLD}.{CONTAINER-IDENTIFIER}:9000/var/www/$1   # For node
#        ServerName {CONTAINER-IDENTIFIER}.{PROJECT-IDENTIFIER}.{TLD}     # If service is sub-domain
#        DocumentRoot /var/www/{CONTAINER-IDENTIFIER}                     # {CONTAINER-IDENTIFIER} is equal to sub directory name
#        <Directory /var/www/{CONTAINER-IDENTIFIER}/>
#            DirectoryIndex index.html
#            AllowOverride All
#            <IfVersion < 2.4>
#                  Allow from all
#            </IfVersion>
#            <IfVersion >= 2.4>
#              Require all granted
#            </IfVersion>
#        </Directory>
#        # Send apache logs to stdout and stderr
#        CustomLog /proc/self/fd/1 common
#        ErrorLog /proc/self/fd/2
#    </VirtualHost>
#
# APACHE_VIRTUAL_HOST
#   - Automatically configures reverse proxy if [opendocks/o-proxy](https://github.com/opendocks/o-proxy) is running
#   - For multiple virtual hosts, or sub domains provide comma separated list
# ----------------------------------------------------------------------------------------------------------------------
#
